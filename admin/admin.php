<?php
function sg_newsletter_menu()
{
    add_menu_page(
        'Sendgrid Newsletter Settings',
        'Sendgrid Newsletter',
        'manage_options',
        'sendgrid-newsletter-settings',
        'sg_newsletter_settings_page',
        'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBVcGxvYWRlZCB0bzogU1ZHIFJlcG8sIHd3dy5zdmdyZXBvLmNvbSwgR2VuZXJhdG9yOiBTVkcgUmVwbyBNaXhlciBUb29scyAtLT4NCjxzdmcgZmlsbD0iIzAwMDAwMCIgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgDQoJIHZpZXdCb3g9IjAgMCAxNjYuNzgxIDE2Ni43ODEiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxnPg0KCQkJPHBhdGggZD0iTTE2My40NTEsNzAuMDQ2bC0zMi4zNS0yMC44NDdjLTAuMjUzLTAuMTYxLTAuNTMyLTAuMjIyLTAuODA0LTAuMzEydi03LjE5YzAtMS45Mi0xLjU1NC0zLjQ3NS0zLjQ3NS0zLjQ3NUgxMTMuOTINCgkJCQlMODYuOTcsMjEuMzc4Yy0xLjEyNi0wLjcwNi0yLjU1OC0wLjcwNi0zLjY4NSwwbC0yNi45NSwxNi44NDRIMzkuOTU4Yy0xLjkyLDAtMy40NzUsMS41NTQtMy40NzUsMy40NzV2Ny4xODgNCgkJCQljLTAuMjcyLDAuMDktMC41NTIsMC4xNTItMC44MDQsMC4zMTRMMy4zMjksNzAuMDQ2Yy0wLjk5MSwwLjY0MS0xLjU5MiwxLjc0MS0xLjU5MiwyLjkyMXY5MC4zMzljMCwxLjkyLDEuNTU0LDMuNDc1LDMuNDc1LDMuNDc1DQoJCQkJaDE1Ni4zNTZjMS45MiwwLDMuNDc1LTEuNTU0LDMuNDc1LTMuNDc1VjcyLjk2OEMxNjUuMDQzLDcxLjc4NywxNjQuNDQyLDcwLjY4OCwxNjMuNDUxLDcwLjA0NnogTTg1LjEyOCwyOC40MjNsMTUuNjgxLDkuNzk5DQoJCQkJSDY5LjQ0N0w4NS4xMjgsMjguNDIzeiBNNDMuNDMzLDQ1LjE3MWg3OS45MTV2NzguMTc4YzAsMC4wMSwwLjAwNiwwLjAxOCwwLjAwNiwwLjAyOWwtMTEuNzU0LDcuMTM3bC0yOC4yODQtMTUuNDI3DQoJCQkJYy0xLjA1NS0wLjU3LTIuMzM4LTAuNTY3LTMuMzg2LDAuMDM0bC0yNS44MSwxNC43NDlsLTEwLjY5Mi02LjQ5MmMwLTAuMDEsMC4wMDYtMC4wMTgsMC4wMDYtMC4wMjhMNDMuNDMzLDQ1LjE3MXogTTguNjg3LDc0Ljg2MQ0KCQkJCWwyNy43OTYtMTcuOTF2NjIuMjEyTDguNjg3LDEwMi4yODVWNzQuODYxeiBNOC42ODcsMTEwLjQxMmwzOC41MzcsMjMuMzk3TDguNjg3LDE1NS44MzFWMTEwLjQxMnogTTE1LjY4OSwxNTkuODMzbDY2LjAwNS0zNy43MTUNCgkJCQlsNjkuMTQ1LDM3LjcxNUgxNS42ODl6IE0xNTguMDk0LDE1NS44NzRMMTE4LjY1LDEzNC4zNmwzOS40NDQtMjMuOTQ5VjE1NS44NzR6IE0xNTguMDk0LDEwMi4yODVsLTI3Ljc5NywxNi44NzdWNTYuOTUxDQoJCQkJbDI3Ljc5NywxNy45MTFWMTAyLjI4NXoiLz4NCgkJCTxwYXRoIGQ9Ik01Ny4zMzEsNzkuOTE3aDQxLjY5NWMxLjkyLDAsMy40NzUtMS41NTQsMy40NzUtMy40NzVWNTUuNTk1YzAtMS45Mi0xLjU1NC0zLjQ3NS0zLjQ3NS0zLjQ3NUg1Ny4zMzENCgkJCQljLTEuOTIsMC0zLjQ3NSwxLjU1NC0zLjQ3NSwzLjQ3NXYyMC44NDdDNTMuODU2LDc4LjM2Myw1NS40MTEsNzkuOTE3LDU3LjMzMSw3OS45MTd6IE02MC44MDUsNTkuMDY5aDM0Ljc0NnYxMy44OThINjAuODA1DQoJCQkJVjU5LjA2OXoiLz4NCgkJCTxyZWN0IHg9IjUzLjg1NiIgeT0iODYuODY2IiB3aWR0aD0iNTUuNTkzIiBoZWlnaHQ9IjYuOTQ5Ii8+DQoJCQk8cmVjdCB4PSI1My44NTYiIHk9IjEwMC43NjUiIHdpZHRoPSI1NS41OTMiIGhlaWdodD0iNi45NDkiLz4NCgkJCTxwYXRoIGQ9Ik0xNDcuNjcsNDEuNjk3YzAuODg5LDAsMS43NzgtMC4zMzksMi40NTctMS4wMThsMTIuMjgzLTEyLjI4M2MxLjM1Ny0xLjM1NywxLjM1Ny0zLjU1NiwwLTQuOTEzDQoJCQkJYy0xLjM1Ny0xLjM1OC0zLjU1Ni0xLjM1Ny00LjkxMywwbC0xMi4yODMsMTIuMjgzYy0xLjM1NywxLjM1Ny0xLjM1NywzLjU1NiwwLDQuOTEzDQoJCQkJQzE0NS44OTIsNDEuMzU4LDE0Ni43ODEsNDEuNjk3LDE0Ny42Nyw0MS42OTd6Ii8+DQoJCQk8cGF0aCBkPSJNMTYuNjU0LDQwLjY3OWMwLjY3OSwwLjY3OSwxLjU2OCwxLjAxOCwyLjQ1NywxLjAxOGMwLjg4OSwwLDEuNzc4LTAuMzM5LDIuNDU3LTEuMDE4YzEuMzU3LTEuMzU3LDEuMzU3LTMuNTU2LDAtNC45MTMNCgkJCQlMOS4yODQsMjMuNDgzYy0xLjM1Ny0xLjM1Ny0zLjU1Ni0xLjM1Ny00LjkxMywwYy0xLjM1NywxLjM1Ny0xLjM1NywzLjU1NiwwLDQuOTEzTDE2LjY1NCw0MC42Nzl6Ii8+DQoJCQk8cGF0aCBkPSJNMTE4LjU4NCwyNC4wNzZjMC40MjEsMC4xNywwLjg1OSwwLjI0NywxLjI4OSwwLjI0N2MxLjM3OCwwLDIuNjg0LTAuODI1LDMuMjI3LTIuMTg1bDYuOTQ5LTE3LjM3Mw0KCQkJCWMwLjcxMy0xLjc4MS0wLjE1Ni0zLjgwNC0xLjkzNy00LjUxNmMtMS43NjQtMC43MDktMy44MDQsMC4xNDktNC41MTYsMS45MzdsLTYuOTQ5LDE3LjM3Mw0KCQkJCUMxMTUuOTM0LDIxLjM0MSwxMTYuODAyLDIzLjM2NCwxMTguNTg0LDI0LjA3NnoiLz4NCgkJCTxwYXRoIGQ9Ik00Ny4xNTUsMjIuMTM5YzAuNTQzLDEuMzYxLDEuODQ5LDIuMTg1LDMuMjI3LDIuMTg1YzAuNDMxLDAsMC44NjktMC4wNzgsMS4yODktMC4yNDgNCgkJCQljMS43ODEtMC43MTMsMi42NS0yLjczNSwxLjkzNy00LjUxNkw0Ni42NTksMi4xODdjLTAuNzEzLTEuNzg4LTIuNzQ4LTIuNjQ3LTQuNTE2LTEuOTM3Yy0xLjc4MSwwLjcxMy0yLjY1LDIuNzM1LTEuOTM3LDQuNTE2DQoJCQkJTDQ3LjE1NSwyMi4xMzl6Ii8+DQoJCTwvZz4NCgk8L2c+DQo8L2c+DQo8L3N2Zz4='
    );
}
add_action('admin_menu', 'sg_newsletter_menu');

function sg_newsletter_settings_page()
{
    include SG_NEWSLETTER_PLUGIN . '/admin/admin_settings_page.php';
}

function sg_newsletter_enqueue_admin_scripts($hook)
{
    if ($hook === 'toplevel_page_sendgrid-newsletter-settings') {
        wp_enqueue_style('sg_newsletter-admin-settings-css', SG_NEWSLETTER_PLUGIN_URL . 'admin/assets/css/admin_settings_page.css');
        wp_enqueue_script('sg_newsletter-admin-settings-js', SG_NEWSLETTER_PLUGIN_URL . 'admin/assets/js/admin_settings_page.js', array('jquery'), '1.0', true);
    }
}
add_action('admin_enqueue_scripts', 'sg_newsletter_enqueue_admin_scripts');
